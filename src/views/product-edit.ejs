<!DOCTYPE html>
<html lang="en">

<head>
  <%- include("./partials/head") %>
    <title>Estas Editando ...</title>
    <link rel="stylesheet" href="\css\edit-create-form.css" />
    <script src="\js\products\edit.js"></script>
</head>

<body>
  <%- include("./partials/header") %>

    <main>
      <div class="container">
        <div class="row"></div>
        <div class="form-container">

          <form action="/products/<%= productToEdit.id %>?_method=PUT" method="post" id="product-form"
            enctype="multipart/form-data">
            <div>
              <h1>Estás editando: <%= productToEdit.nombre %>
              </h1>
            </div>
            <div>
              <div class="form-container__input">
                <label for="nombre">Nombre del producto:</label>
                <small class="validation" id="nombreValidation"></small>
                <input type="text" id="nombre" name="nombre" value="<%= productToEdit.nombre %>" />
                <small class="text-danger">
                  <% if (locals.errors && errors.nombre) {%>
                    <%= errors.nombre.msg %>
                      <%} %>
                </small>
              </div>
              <div class="form-container__input">
                <label for="precio">Precio del producto:</label>
                <small class="validation" id="precioValidation"></small>
                <input type="text" id="precio" name="precio" value="<%= productToEdit.precio %>" />
                <small class="text-danger">
                  <% if (locals.errors && errors.precio) {%>
                    <%= errors.precio.msg %>
                      <%} %>
                </small>
              </div>
              <!-- Resto de los campos de edición -->
              <div class="form-container__input">
                <label for="descuento">Descuento:</label>
                <input type="text" id="descuento" name="descuento" value="<%= productToEdit.descuento %>"
                  pattern="[0-9]+" title="Ingresa solo números" />
                <small class="text-danger">
                  <% if (locals.errors && errors.descuento) {%>
                    <%= errors.descuento.msg %>
                      <%} %>
                </small>
              </div>


              <!-- Campos para editar "tipo" y "sección" -->
              <div class="form-container__input">
                <label for="tipo">Tipo:</label>
                <small class="validation" id="categoriaValidation"></small>
                <select name="tipo" id="tipo">
                  <option value="">Tipo de Producto</option>
                  <% tipos.forEach(function(tipo) { %>
                    <option value="<%= tipo.id %>" <% if (tipo.id===productToEdit.tipoId) { %> selected <% } %>>
                        <%= tipo.nombre %>
                    </option>
                    <% }); %>
                </select>
                <small class="text-danger">
                  <% if (locals.errors && errors.tipo) {%>
                    <%= errors.tipo.msg %>
                      <%} %>
                </small>
              </div>
              <div class="form-container__input">
                <label for="seccion">Sección:</label>
                <small class="validation" id="seccionValidation"></small>
                <select name="seccion" id="seccion">
                  <option value="">Ninguna</option>
                  <% secciones.forEach(function(seccion) { %>
                    <option value="<%= seccion.id %>" <% if (seccion.id===productToEdit.seccionId) { %> selected <% } %>
                        >
                        <%= seccion.nombre %>
                    </option>
                    <% }); %>
                </select>
                <small class="text-danger">
                  <% if (locals.errors && errors.seccion) {%>
                    <%= errors.seccion.msg %>
                      <%} %>
                </small>
              </div>
              <div class="form-container__input">
                <label for="marca">Marca:</label>
                <small class="validation" id="marcaValidation"></small>
                <select name="marca" id="marca">
                  <option value="">Selecciona una marca</option>
                  <% marcas.forEach(function(marca) { %>
                    <option value="<%= marca.id %>" <% if (marca.id===productToEdit.marcaId) { %> selected <% } %>>
                        <%= marca.nombre %>
                    </option>
                    <% }); %>
                </select>
                <small class="text-danger">
                  <% if (locals.errors && errors.marca) {%>
                    <%= errors.marca.msg %>
                      <%} %>
                </small>
              </div>

              <div class="form-container__input">
                <label for="descripcion">Descripción:</label>
                <small class="validation" id="descripcionValidation"></small>
                <textarea name="descripcion" id="descripcion"><%= productToEdit.descripcion %></textarea>
                <small class="text-danger">
                  <% if (locals.errors && errors.descripcion) {%>
                    <%= errors.descripcion.msg %>
                      <%} %>
                </small>
              </div>
              <div class="form-container__input">
                <label for="img">Imágenes del producto</label>
                <small class="validation" id="imagenValidation"></small>
                <input type="file" name="productImage" />
                <small class="text-danger">
                  <% if (locals.errors && errors.productImage) {%>
                    <%= errors.productImage.msg %>
                      <%} %>
                </small>
              </div>
              <div class="form-container__button">
                <button type="submit" class="buy-now-button">
                  Guardar cambios
                </button>
              </div>
              <div class="form-container__button">
                <a href="/products/admin">Volver</a>
              </div>
            </div>

          </form>
        </div>
      </div>
    </main>

    <%- include("./partials/footer") %>
</body>

</html>